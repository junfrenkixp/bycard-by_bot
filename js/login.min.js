function onTelegramAuth(a){var e=JSON.stringify(a);$.ajax({type:"POST",url:"/auth/check",data:e,contentType:"application/json",dataType:"json",success:function(e){if(e.error)return $(".alert").text(e.error),$(".alert").slideDown(250),void setTimeout(function(){$(".alert").slideUp(250)},5e3);var t=JSON.stringify(a),o=new Date((new Date).getTime()+864e5);if(document.cookie="telegramUser="+t+"; path=/; expires="+o.toUTCString(),$(".telegramAuth").collapse("hide"),"getConfirm"==e.response)return $(".confirm").collapse("show"),void $("#account").text(e.account);$(".bycardAuth").collapse("show")}})}$(document).ready(function(){try{value=JSON.parse((document.cookie.match(/^(?:.*;)?\s*telegramUser\s*=\s*([^;]+)(?:.*)?$/)||[,void 0])[1])}catch(e){return $(".telegramAuth").collapse("show"),$(".progress").removeClass("show"),void $(".progress").collapse("hide")}var e=JSON.stringify(value),o=$(".loading");$.ajax({type:"POST",url:"/auth/check",data:e,contentType:"application/json",dataType:"json",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),o.css("width",t+"%")}},!1),e},success:function(e){return $(".progress").removeClass("show"),$(".progress").collapse("hide"),e.error?($(".telegramAuth").collapse("show"),$(".alert").text(e.error),$(".alert").slideDown(250),void setTimeout(function(){$(".alert").slideUp(250)},5e3)):"getConfirm"==e.response?($(".confirm").collapse("show"),void $("#account").text(e.account)):void $(".bycardAuth").collapse("show")}})}),$("#loginform").submit(function(e){e.preventDefault();try{value=JSON.parse((document.cookie.match(/^(?:.*;)?\s*telegramUser\s*=\s*([^;]+)(?:.*)?$/)||[,void 0])[1])}catch(e){return void $(".telegramAuth").collapse("show")}value.login=$("#login").val(),value.password=$("#password").val();var t=JSON.stringify(value);$.ajax({type:"POST",url:"/auth",async:!1,data:t,dataType:"json",contentType:"application/json",success:function(e){e.response?($("#account2").text(e.account),$(".bycardAuth").collapse("hide"),$(".successAuth").collapse("show")):e.error&&(1==e.code&&($(".bycardAuth").collapse("hide"),$(".telegramAuth").collapse("show")),$(".alert").text(e.error),$(".alert").slideDown(250),setTimeout(function(){$(".alert").slideUp(250)},5e3))}})});